**Лабораторная работа 2**

# Реализация CRUD с помощью SOAP-сервиса



## Задание

В ранее разработанный веб-сервис (standalone-реализацию, см. ЛР1 часть 1) необходимо добавить методы для создания, изменения и удаления записей из таблицы БД. 

Метод создания должен принимать значения полей новой записи, методы изменения и удаления - идентификатор изменяемой/удаляемой записи, методы изменения и удаления возвращают статус операции. 

Соответствующим образом необходимо обновить клиентское приложение.



## Ход работы

Получим исходные классы из первой лабораторной работы, в которой было реализовано standalone-приложение. База данных PostgreSQL также взята из первой лабораторной работы. Настройки окружения разработки описаны также в 1 лабораторной работе.

### Добавление методов сервиса

Необходимо добавить методы:

1. Создания - CREATE: принимает значения полей новой записи в качестве аргументов;
2. Получения / Чтения - READ: реализован в первой работе и позволяет находить записи по значениям их полей;
3. Изменения - UPDATE: принимает идентификатор изменяемой записи, возвращает статус операции;
4. Удаления - DELETE: принимает идентификатор удаляемой записи, возвращает статус операции.





### Обновление клиентского приложения

Изначально сгенерируем новые классы по WSDL-описанию:

```shell
wsimport -keep -p com.labs.client.generated http://localhost:8080/FindStudentsService?wsdl
```

Далее необходимо внести изменения в класс WebServiceClient. 
Необходимо добавить возможность выбора метода и передачи соответствующих параметров 
через командную строку. В результате необходимо выводить сообщение о статусе операции для
создания, изменения и удаления объектов.

Для разделения методов в классе WebServiceClient создадим под каждую операцию отдельны метод,
т.е. созданный в первой лабораторной работе метод main теперь будет в зависимости от указанного 
в консоли запроса (CREATE - метод createStudentRow, READ - метод readStudentRowsByFields, 
UPDATE - метод updateStudentRowById, DELETE - метод deleteStudentRowById) вызывать соответствующий метод класса WebServiceClient, 
который и будет выполнять необходимый запрос. При выборе READ, будет вызван метод для поиска записей таблицы 
по указанным полям. Остальные методы будут соответствовать созданию, изменению и удалению записей 
из таблицы БД.

Изначально перенесем разработанный в первой лабораторной работе функционал в метод readStudentRowsByFields. 
Метод будет private static, чтобы оставить доступ только из метода main. В качестве аргумента будет подаваться 
объект `CRUDService studentService`, а в результате работы будем получать список students, который будет 
выведен в консоль без возврата return, т.е. данный метод будет void.

Выбор требуемой операции производится при помощи ввода в консоль: CREATE, READ, UPDATE, DELETE. 
Для этого используется метод main(), который определяет точку входа в клиентское приложение.